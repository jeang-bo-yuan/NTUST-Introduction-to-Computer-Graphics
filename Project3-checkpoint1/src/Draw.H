/*****************************************************************//**
 * \file Draw.H
 * \author 奖痴じ
 * \date 2023/10/14
 * \brief eF瑾酣缂
 *********************************************************************/
#pragma once
#include <functional>
#include "Utilities/Pnt3f.H"
#include "Enum.H"
#include "Track.H"

/// @brief 把计Αの酶syDB酲
namespace Draw {

	/// @brief Param_Equation O@function objectAノㄓ恁芙u喊鸭痞
	/// @details 把计 - 把计ΑtA ^肚 - I
	typedef std::function<Pnt3f(float)> Param_Equation;

	/// @brief 廿撙@营浇u喊鸭痞
	/// @param p1 - t=0 瑟郝I
	/// @param p2 - t=1 瑟郝I
	Param_Equation make_line(const Pnt3f p1, const Pnt3f p2);

	/// @brief 廿Cubic B-spline喊鸭痞
	/// @param p0 - 螳岘豹罕报盥I
	/// @param p1 - }l
	/// @param p2 - 挡
	/// @param p3 - 螳e豹罕报盥I
	Param_Equation make_cubic_b_spline(Pnt3f p0, Pnt3f p1, Pnt3f p2, Pnt3f p3);

	/// @brief 廿Cardinal Spline喊鸭痞
	/// @param p0 - 螳岘豹罕报盥I
	/// @param p1 - }l
	/// @param p2 - 挡
	/// @param p3 - 螳e豹罕报盥I
	Param_Equation make_cardinal(Pnt3f p0, Pnt3f p1, Pnt3f p2, Pnt3f p3);

	/**
	 * @brief ]wㄢcontrol point丁喊鸭痞
	 * @param track - yD
	 * @param cp_id - 材@control pointindex
	 * @param type - 把计Α韩Α
	 * @param[out] point_eq - xsuI喊鸭痞　v
	 * @param[out] orient_eq - xsuorient喊鸭痞　v
	 * @post YtypeODk涵取Ahpoint_eqMorient_eq]Θ`nullptr`
	 */
	void set_equation(const CTrack& track, const size_t cp_id, const SplineType type,
		Draw::Param_Equation& point_eq, Draw::Param_Equation& orient_eq);

	/// @brief eXyD
	/// @param track - yD
	/// @param type - い丁郝InH贺把计Αp衡
	/// @param doingShadow - O_be潮v
	void draw_track(const CTrack& track, const SplineType type, const bool doingShadow);

	/// @brief eX酲
	/// @param track - 酲┮b涵yD
	/// @param type - い丁郝InH贺把计Αp衡
	/// @param doingShadow - O_be潮v
	void draw_train(const CTrack& track, const SplineType type, const bool doingShadow);

} // namespace Draw
